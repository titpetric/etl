---
version: "1"

server:
  http: ":3123"
  grpc: ":50051"

endpoints:
  - name: "Ping health check"
    path: "/api/ping"
    handler:
      type: "ping"

  - name: "Echo request body back"
    path: "/api/echo"
    handler:
      type: "echo"

  - name: "Execute PHP through FastCGI"
    path: "/api/php-fastcgi"
    handler:
      type: "fastcgi"
      root: "."
      file: "index.php"
      network: "tcp"
      address: "php-fpm:9000"

  - name: "Execute PHP script directly"
    path: "/api/exec-php"
    handler:
      type: "exec"
      command: ["/usr/bin/php", "index.php"]

  - name: "Random fortune quote"
    path: "/api/fortune"
    handler:
      type: "exec"
      command: ["/usr/games/fortune"]

  - name: "Plugin ping function"
    path: "/api/plugin-ping"
    handler:
      type: "plugin"
      library: "./plugins/plugins.so"
      function: "PluginPing"

  - name: "Background task execution"
    path: "/api/background-task"
    handler:
      type: "plugin"
      library: "./plugins/plugins.so"
      function: "BackgroundTask"
