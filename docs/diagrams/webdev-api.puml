@startuml
skinparam monochrome reverse

actor Client
participant "Web Server / Router" as WebServer
participant "Page Handler\n(/users)" as PageHandler
participant "Service Discovery /\nAPI Gateway" as Discovery
participant "Users API Service\n(external)" as UsersAPI
database "SQL Database\n(for Users API Service)" as Database
participant "Template Renderer" as Renderer

Client -> WebServer : GET /users
WebServer -> PageHandler : route /users

PageHandler -> Discovery : resolve endpoint for Users API
Discovery --> PageHandler : API endpoint URL

PageHandler -> UsersAPI : GET /api/users (external request)
UsersAPI -> Database : EXECUTE SQL
Database --> UsersAPI : rows[]
UsersAPI --> PageHandler : JSON { users: [...] }

PageHandler -> Renderer : render(users.html, json.users)
Renderer --> PageHandler : HTML
PageHandler --> Client : HTTP 200 HTML

@enduml
