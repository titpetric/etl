# Testing coverage

Testing criteria for a passing coverage requirement:

- Line coverage of 80%
- Cognitive complexity of 0
- Have cognitive complexity < 5, but have any coverage

Low cognitive complexity means there are few conditional branches to
cover. Tests with cognitive complexity 0 would be covered by invocation.

## Packages

| Status | Package                                                      | Coverage | Cognitive | Lines |
| ------ | ------------------------------------------------------------ | -------- | --------- | ----- |
| ❌      | titpetric/etl/cmd/etl                             | 0.00%    | 7         | 68    |
| ❌      | titpetric/etl/drivers                             | 0.00%    | 35        | 249   |
| ❌      | titpetric/etl/handlers                            | 0.00%    | 106       | 432   |
| ❌      | titpetric/etl/internal                            | 0.00%    | 25        | 105   |
| ❌      | titpetric/etl/model                               | 0.00%    | 25        | 102   |
| ✅      | titpetric/etl/server                              | 85.71%   | 1         | 41    |
| ❌      | titpetric/etl/server/config                       | 60.76%   | 46        | 96    |
| ✅      | titpetric/etl/server/config/loader                | 89.43%   | 24        | 295   |
| ✅      | titpetric/etl/server/internal                     | 100.00%  | 2         | 19    |
| ✅      | titpetric/etl/server/internal/db/order            | 100.00%  | 0         | 14    |
| ❌      | titpetric/etl/server/internal/handler             | 73.70%   | 12        | 36    |
| ✅      | titpetric/etl/server/internal/handler/model       | 100.00%  | 2         | 18    |
| ❌      | titpetric/etl/server/internal/handler/query       | 42.86%   | 32        | 125   |
| ✅      | titpetric/etl/server/internal/handler/query/model | 71.40%   | 2         | 12    |
| ✅      | titpetric/etl/server/internal/handler/request     | 81.81%   | 36        | 180   |
| ❌      | titpetric/etl/server/internal/handler/sql         | 42.99%   | 180       | 731   |
| ✅      | titpetric/etl/server/middleware/cache             | 83.27%   | 60        | 312   |
| ❌      | titpetric/etl/server/middleware/ratelimit         | 77.20%   | 50        | 329   |

## Functions

| Status | Package                                                      | Function                         | Coverage | Cognitive |
| ------ | ------------------------------------------------------------ | -------------------------------- | -------- | --------- |
| ❌      | titpetric/etl/cmd/etl                             | HandleCommand                    | 0.00%    | 1         |
| ❌      | titpetric/etl/cmd/etl                             | getInput                         | 0.00%    | 2         |
| ❌      | titpetric/etl/cmd/etl                             | main                             | 0.00%    | 1         |
| ❌      | titpetric/etl/cmd/etl                             | start                            | 0.00%    | 3         |
| ❌      | titpetric/etl/drivers                             | MySQL.Insert                     | 0.00%    | 6         |
| ❌      | titpetric/etl/drivers                             | MySQL.Query                      | 0.00%    | 2         |
| ❌      | titpetric/etl/drivers                             | MySQL.Tables                     | 0.00%    | 3         |
| ✅      | titpetric/etl/drivers                             | MySQL.insertQueryNamed           | 0.00%    | 0         |
| ❌      | titpetric/etl/drivers                             | New                              | 0.00%    | 1         |
| ✅      | titpetric/etl/drivers                             | NewMySQL                         | 0.00%    | 0         |
| ✅      | titpetric/etl/drivers                             | NewPgx                           | 0.00%    | 0         |
| ✅      | titpetric/etl/drivers                             | NewSqlite                        | 0.00%    | 0         |
| ❌      | titpetric/etl/drivers                             | Pgx.Insert                       | 0.00%    | 6         |
| ❌      | titpetric/etl/drivers                             | Pgx.Query                        | 0.00%    | 2         |
| ✅      | titpetric/etl/drivers                             | Pgx.Tables                       | 0.00%    | 0         |
| ✅      | titpetric/etl/drivers                             | Pgx.insertQueryNamed             | 0.00%    | 0         |
| ❌      | titpetric/etl/drivers                             | Sqlite.Insert                    | 0.00%    | 8         |
| ❌      | titpetric/etl/drivers                             | Sqlite.Query                     | 0.00%    | 5         |
| ✅      | titpetric/etl/drivers                             | Sqlite.Tables                    | 0.00%    | 0         |
| ❌      | titpetric/etl/drivers                             | Sqlite.insertQueryNamed          | 0.00%    | 2         |
| ❌      | titpetric/etl/handlers                            | Get                              | 0.00%    | 19        |
| ❌      | titpetric/etl/handlers                            | Insert                           | 0.00%    | 2         |
| ❌      | titpetric/etl/handlers                            | List                             | 0.00%    | 11        |
| ❌      | titpetric/etl/handlers                            | Query                            | 0.00%    | 12        |
| ✅      | titpetric/etl/handlers                            | Server                           | 0.00%    | 0         |
| ❌      | titpetric/etl/handlers                            | Tables                           | 0.00%    | 2         |
| ❌      | titpetric/etl/handlers                            | Update                           | 0.00%    | 24        |
| ❌      | titpetric/etl/handlers                            | UpdateRequest                    | 0.00%    | 7         |
| ❌      | titpetric/etl/handlers                            | Version                          | 0.00%    | 4         |
| ❌      | titpetric/etl/handlers                            | buildInsertQuery                 | 0.00%    | 3         |
| ❌      | titpetric/etl/handlers                            | buildUpdateQuery                 | 0.00%    | 8         |
| ✅      | titpetric/etl/handlers                            | csv                              | 0.00%    | 0         |
| ❌      | titpetric/etl/handlers                            | decodeQueryParameters            | 0.00%    | 10        |
| ❌      | titpetric/etl/handlers                            | scanAllRecords                   | 0.00%    | 3         |
| ❌      | titpetric/etl/handlers                            | scanRecord                       | 0.00%    | 1         |
| ❌      | titpetric/etl/internal                            | DecodeQuery                      | 0.00%    | 10        |
| ❌      | titpetric/etl/internal                            | DecodeRecords                    | 0.00%    | 7         |
| ❌      | titpetric/etl/internal                            | Scan                             | 0.00%    | 1         |
| ❌      | titpetric/etl/internal                            | ScanAll                          | 0.00%    | 4         |
| ❌      | titpetric/etl/internal                            | Statements                       | 0.00%    | 3         |
| ✅      | titpetric/etl/internal                            | builtins                         | 0.00%    | 0         |
| ❌      | titpetric/etl/model                               | Config.GetDSN                    | 0.00%    | 1         |
| ❌      | titpetric/etl/model                               | Config.GetDriver                 | 0.00%    | 1         |
| ❌      | titpetric/etl/model                               | Config.ParseFlags                | 0.00%    | 1         |
| ✅      | titpetric/etl/model                               | NewConfig                        | 0.00%    | 0         |
| ✅      | titpetric/etl/model                               | NewFlagSet                       | 0.00%    | 0         |
| ❌      | titpetric/etl/model                               | RecordInput.Record               | 0.00%    | 1         |
| ❌      | titpetric/etl/model                               | dbValue                          | 0.00%    | 2         |
| ❌      | titpetric/etl/model                               | filterKnownArgs                  | 0.00%    | 19        |
| ✅      | titpetric/etl/server                              | Module.Mount                     | 100.00%  | 0         |
| ✅      | titpetric/etl/server                              | Module.Name                      | 100.00%  | 0         |
| ✅      | titpetric/etl/server                              | Module.Start                     | 100.00%  | 0         |
| ✅      | titpetric/etl/server                              | Module.Stop                      | 100.00%  | 0         |
| ✅      | titpetric/etl/server                              | NewConfig                        | 100.00%  | 0         |
| ✅      | titpetric/etl/server                              | NewModule                        | 100.00%  | 0         |
| ❌      | titpetric/etl/server                              | Start                            | 0.00%    | 1         |
| ❌      | titpetric/etl/server/config                       | Config.Validate                  | 0.00%    | 2         |
| ❌      | titpetric/etl/server/config                       | Decode                           | 62.10%   | 41        |
| ✅      | titpetric/etl/server/config                       | Handler.Decode                   | 66.70%   | 1         |
| ✅      | titpetric/etl/server/config                       | Handler.UnmarshalYAML            | 100.00%  | 0         |
| ✅      | titpetric/etl/server/config                       | applyStorageEnvOverrides         | 75.00%   | 2         |
| ✅      | titpetric/etl/server/config/loader                | CacheCloneManager.Get            | 100.00%  | 1         |
| ✅      | titpetric/etl/server/config/loader                | CacheCloneManager.String         | 100.00%  | 0         |
| ✅      | titpetric/etl/server/config/loader                | CacheCloneManager.loadAndSet     | 66.70%   | 2         |
| ✅      | titpetric/etl/server/config/loader                | CacheCloneManager.set            | 85.70%   | 1         |
| ✅      | titpetric/etl/server/config/loader                | CacheExpiryManager.Get           | 100.00%  | 2         |
| ✅      | titpetric/etl/server/config/loader                | CacheExpiryManager.String        | 100.00%  | 0         |
| ✅      | titpetric/etl/server/config/loader                | CacheExpiryManager.loadAndSet    | 66.70%   | 2         |
| ✅      | titpetric/etl/server/config/loader                | CacheExpiryManager.set           | 100.00%  | 0         |
| ✅      | titpetric/etl/server/config/loader                | CacheForeverManager.Get          | 100.00%  | 1         |
| ✅      | titpetric/etl/server/config/loader                | CacheForeverManager.String       | 100.00%  | 0         |
| ✅      | titpetric/etl/server/config/loader                | CacheForeverManager.loadAndSet   | 66.70%   | 2         |
| ✅      | titpetric/etl/server/config/loader                | CacheForeverManager.set          | 100.00%  | 0         |
| ✅      | titpetric/etl/server/config/loader                | CacheModifiedManager.Get         | 81.80%   | 5         |
| ✅      | titpetric/etl/server/config/loader                | CacheModifiedManager.String      | 100.00%  | 0         |
| ✅      | titpetric/etl/server/config/loader                | CacheModifiedManager.loadAndSet  | 66.70%   | 2         |
| ✅      | titpetric/etl/server/config/loader                | CacheModifiedManager.set         | 100.00%  | 0         |
| ✅      | titpetric/etl/server/config/loader                | CacheNone.Get                    | 75.00%   | 1         |
| ✅      | titpetric/etl/server/config/loader                | CacheNone.String                 | 100.00%  | 0         |
| ✅      | titpetric/etl/server/config/loader                | CacheNone.set                    | 0.00%    | 0         |
| ✅      | titpetric/etl/server/config/loader                | CacheSharedManager.Get           | 100.00%  | 1         |
| ✅      | titpetric/etl/server/config/loader                | CacheSharedManager.String        | 100.00%  | 0         |
| ✅      | titpetric/etl/server/config/loader                | CacheSharedManager.loadAndSet    | 66.70%   | 2         |
| ✅      | titpetric/etl/server/config/loader                | CacheSharedManager.set           | 85.70%   | 1         |
| ✅      | titpetric/etl/server/config/loader                | Load                             | 100.00%  | 1         |
| ✅      | titpetric/etl/server/config/loader                | Loader.Load                      | 100.00%  | 0         |
| ✅      | titpetric/etl/server/config/loader                | New                              | 100.00%  | 0         |
| ✅      | titpetric/etl/server/config/loader                | NewCacheCloneManager             | 100.00%  | 0         |
| ✅      | titpetric/etl/server/config/loader                | NewCacheExpiryManager            | 100.00%  | 0         |
| ✅      | titpetric/etl/server/config/loader                | NewCacheForeverManager           | 100.00%  | 0         |
| ✅      | titpetric/etl/server/config/loader                | NewCacheModifiedManager          | 100.00%  | 0         |
| ✅      | titpetric/etl/server/config/loader                | NewCacheNone                     | 100.00%  | 0         |
| ✅      | titpetric/etl/server/config/loader                | NewCacheSharedManager            | 100.00%  | 0         |
| ✅      | titpetric/etl/server/internal                     | Marshal                          | 100.00%  | 1         |
| ✅      | titpetric/etl/server/internal                     | MarshalIndent                    | 100.00%  | 1         |
| ✅      | titpetric/etl/server/internal/db/order            | Asc                              | 100.00%  | 0         |
| ✅      | titpetric/etl/server/internal/db/order            | Desc                             | 100.00%  | 0         |
| ❌      | titpetric/etl/server/internal/handler             | Mount                            | 73.70%   | 12        |
| ✅      | titpetric/etl/server/internal/handler/model       | DBValue                          | 100.00%  | 2         |
| ✅      | titpetric/etl/server/internal/handler/model       | Handlers                         | 100.00%  | 0         |
| ✅      | titpetric/etl/server/internal/handler/model       | Register                         | 100.00%  | 0         |
| ❌      | titpetric/etl/server/internal/handler/query       | Handler.Handler                  | 0.00%    | 2         |
| ❌      | titpetric/etl/server/internal/handler/query       | Handler.ServeHTTP                | 0.00%    | 3         |
| ✅      | titpetric/etl/server/internal/handler/query       | Handler.Type                     | 100.00%  | 0         |
| ❌      | titpetric/etl/server/internal/handler/query       | Handler.eval                     | 0.00%    | 12        |
| ❌      | titpetric/etl/server/internal/handler/query       | Handler.prepareQueryParams       | 0.00%    | 15        |
| ✅      | titpetric/etl/server/internal/handler/query       | NewHandler                       | 100.00%  | 0         |
| ✅      | titpetric/etl/server/internal/handler/query       | init                             | 0.00%    | 0         |
| ✅      | titpetric/etl/server/internal/handler/query/model | Load                             | 71.40%   | 2         |
| ✅      | titpetric/etl/server/internal/handler/request     | Handler.EvaluateRequest          | 83.30%   | 14        |
| ✅      | titpetric/etl/server/internal/handler/request     | Handler.Handler                  | 81.20%   | 3         |
| ❌      | titpetric/etl/server/internal/handler/request     | Handler.ServeHTTP                | 50.00%   | 12        |
| ✅      | titpetric/etl/server/internal/handler/request     | Handler.Type                     | 100.00%  | 0         |
| ❌      | titpetric/etl/server/internal/handler/request     | Handler.buildUpstreamPath        | 60.00%   | 6         |
| ✅      | titpetric/etl/server/internal/handler/request     | Handler.renderTemplateResponse   | 80.00%   | 1         |
| ✅      | titpetric/etl/server/internal/handler/request     | NewHandler                       | 100.00%  | 0         |
| ✅      | titpetric/etl/server/internal/handler/request     | init                             | 0.00%    | 0         |
| ✅      | titpetric/etl/server/internal/handler/sql         | Handler.Handler                  | 83.80%   | 17        |
| ❌      | titpetric/etl/server/internal/handler/sql         | Handler.ServeHTTP                | 71.10%   | 20        |
| ✅      | titpetric/etl/server/internal/handler/sql         | Handler.Type                     | 100.00%  | 0         |
| ✅      | titpetric/etl/server/internal/handler/sql         | Handler.buildCacheKey            | 100.00%  | 2         |
| ✅      | titpetric/etl/server/internal/handler/sql         | Handler.collectParameters        | 87.50%   | 15        |
| ❌      | titpetric/etl/server/internal/handler/sql         | Handler.evaluateCondition        | 0.00%    | 3         |
| ❌      | titpetric/etl/server/internal/handler/sql         | Handler.executeLoop              | 0.00%    | 13        |
| ❌      | titpetric/etl/server/internal/handler/sql         | Handler.executePipeline          | 65.00%   | 32        |
| ✅      | titpetric/etl/server/internal/handler/sql         | Handler.executeQuery             | 100.00%  | 2         |
| ✅      | titpetric/etl/server/internal/handler/sql         | Handler.executeQueryDirect       | 88.90%   | 9         |
| ❌      | titpetric/etl/server/internal/handler/sql         | Handler.executeQueryTx           | 77.80%   | 9         |
| ❌      | titpetric/etl/server/internal/handler/sql         | Handler.executeWithTransaction   | 48.00%   | 15        |
| ✅      | titpetric/etl/server/internal/handler/sql         | Handler.getFromCache             | 100.00%  | 2         |
| ❌      | titpetric/etl/server/internal/handler/sql         | Handler.renderTemplateResponse   | 0.00%    | 8         |
| ❌      | titpetric/etl/server/internal/handler/sql         | Handler.setAtPath                | 0.00%    | 6         |
| ❌      | titpetric/etl/server/internal/handler/sql         | Handler.setAtPathWithIndex       | 0.00%    | 9         |
| ✅      | titpetric/etl/server/internal/handler/sql         | Handler.setInCache               | 100.00%  | 4         |
| ✅      | titpetric/etl/server/internal/handler/sql         | Handler.setRateLimitHeaders      | 66.70%   | 4         |
| ❌      | titpetric/etl/server/internal/handler/sql         | Handler.setResponseHeaders       | 30.00%   | 8         |
| ✅      | titpetric/etl/server/internal/handler/sql         | Handler.shouldUseTransaction     | 100.00%  | 1         |
| ✅      | titpetric/etl/server/internal/handler/sql         | NewHandler                       | 100.00%  | 0         |
| ✅      | titpetric/etl/server/internal/handler/sql         | init                             | 0.00%    | 0         |
| ✅      | titpetric/etl/server/internal/handler/sql         | newTemplateFS                    | 0.00%    | 0         |
| ❌      | titpetric/etl/server/internal/handler/sql         | templateFS.Open                  | 0.00%    | 1         |
| ✅      | titpetric/etl/server/internal/handler/sql         | templateFile.Close               | 0.00%    | 0         |
| ✅      | titpetric/etl/server/internal/handler/sql         | templateFile.Read                | 0.00%    | 0         |
| ✅      | titpetric/etl/server/internal/handler/sql         | templateFile.Stat                | 0.00%    | 0         |
| ✅      | titpetric/etl/server/internal/handler/sql         | templateFileInfo.IsDir           | 0.00%    | 0         |
| ✅      | titpetric/etl/server/internal/handler/sql         | templateFileInfo.ModTime         | 0.00%    | 0         |
| ✅      | titpetric/etl/server/internal/handler/sql         | templateFileInfo.Mode            | 0.00%    | 0         |
| ✅      | titpetric/etl/server/internal/handler/sql         | templateFileInfo.Name            | 0.00%    | 0         |
| ✅      | titpetric/etl/server/internal/handler/sql         | templateFileInfo.Size            | 0.00%    | 0         |
| ✅      | titpetric/etl/server/internal/handler/sql         | templateFileInfo.Sys             | 0.00%    | 0         |
| ✅      | titpetric/etl/server/middleware/cache             | CustomKeyBuilder.BuildKey        | 100.00%  | 0         |
| ✅      | titpetric/etl/server/middleware/cache             | DefaultKeyBuilder.BuildKey       | 100.00%  | 2         |
| ✅      | titpetric/etl/server/middleware/cache             | DefaultKeyBuilder.WithHeaders    | 100.00%  | 0         |
| ✅      | titpetric/etl/server/middleware/cache             | DefaultKeyBuilder.WithPattern    | 100.00%  | 0         |
| ✅      | titpetric/etl/server/middleware/cache             | DefaultKeyBuilder.WithQuery      | 100.00%  | 0         |
| ✅      | titpetric/etl/server/middleware/cache             | DefaultKeyBuilder.extractHeaders | 100.00%  | 3         |
| ✅      | titpetric/etl/server/middleware/cache             | DefaultKeyBuilder.extractQuery   | 100.00%  | 12        |
| ❌      | titpetric/etl/server/middleware/cache             | MemoryStore.CleanupExpired       | 0.00%    | 4         |
| ✅      | titpetric/etl/server/middleware/cache             | MemoryStore.Clear                | 83.30%   | 1         |
| ✅      | titpetric/etl/server/middleware/cache             | MemoryStore.Delete               | 83.30%   | 1         |
| ✅      | titpetric/etl/server/middleware/cache             | MemoryStore.Get                  | 90.00%   | 3         |
| ✅      | titpetric/etl/server/middleware/cache             | MemoryStore.Set                  | 100.00%  | 2         |
| ❌      | titpetric/etl/server/middleware/cache             | Middleware.CleanupExpired        | 0.00%    | 1         |
| ✅      | titpetric/etl/server/middleware/cache             | Middleware.WithEnabled           | 100.00%  | 0         |
| ✅      | titpetric/etl/server/middleware/cache             | Middleware.WithLogger            | 0.00%    | 0         |
| ✅      | titpetric/etl/server/middleware/cache             | Middleware.WithTTL               | 100.00%  | 0         |
| ✅      | titpetric/etl/server/middleware/cache             | Middleware.Wrap                  | 92.10%   | 31        |
| ✅      | titpetric/etl/server/middleware/cache             | NewCustomKeyBuilder              | 100.00%  | 0         |
| ✅      | titpetric/etl/server/middleware/cache             | NewDefaultKeyBuilder             | 100.00%  | 0         |
| ✅      | titpetric/etl/server/middleware/cache             | NewMemoryStore                   | 100.00%  | 0         |
| ✅      | titpetric/etl/server/middleware/cache             | NewMiddleware                    | 100.00%  | 0         |
| ✅      | titpetric/etl/server/middleware/ratelimit         | CustomKeyBuilder.BuildKey        | 100.00%  | 0         |
| ✅      | titpetric/etl/server/middleware/ratelimit         | DefaultKeyBuilder.BuildKey       | 100.00%  | 2         |
| ✅      | titpetric/etl/server/middleware/ratelimit         | DefaultKeyBuilder.WithHeaders    | 100.00%  | 0         |
| ✅      | titpetric/etl/server/middleware/ratelimit         | DefaultKeyBuilder.WithPattern    | 100.00%  | 0         |
| ✅      | titpetric/etl/server/middleware/ratelimit         | DefaultKeyBuilder.WithQuery      | 100.00%  | 0         |
| ✅      | titpetric/etl/server/middleware/ratelimit         | DefaultKeyBuilder.extractHeaders | 100.00%  | 3         |
| ✅      | titpetric/etl/server/middleware/ratelimit         | DefaultKeyBuilder.extractQuery   | 100.00%  | 12        |
| ✅      | titpetric/etl/server/middleware/ratelimit         | DefaultKeyBuilder.getClientIP    | 100.00%  | 5         |
| ❌      | titpetric/etl/server/middleware/ratelimit         | MemoryStore.CleanupExpired       | 0.00%    | 4         |
| ✅      | titpetric/etl/server/middleware/ratelimit         | MemoryStore.Clear                | 100.00%  | 1         |
| ✅      | titpetric/etl/server/middleware/ratelimit         | MemoryStore.Inc                  | 84.60%   | 3         |
| ✅      | titpetric/etl/server/middleware/ratelimit         | MemoryStore.Rate                 | 90.00%   | 3         |
| ✅      | titpetric/etl/server/middleware/ratelimit         | MemoryStore.Reset                | 100.00%  | 1         |
| ❌      | titpetric/etl/server/middleware/ratelimit         | Middleware.CleanupExpired        | 0.00%    | 1         |
| ✅      | titpetric/etl/server/middleware/ratelimit         | Middleware.WithEnabled           | 100.00%  | 0         |
| ✅      | titpetric/etl/server/middleware/ratelimit         | Middleware.WithLogger            | 0.00%    | 0         |
| ❌      | titpetric/etl/server/middleware/ratelimit         | Middleware.Wrap                  | 78.30%   | 12        |
| ✅      | titpetric/etl/server/middleware/ratelimit         | NewCustomKeyBuilder              | 100.00%  | 0         |
| ✅      | titpetric/etl/server/middleware/ratelimit         | NewDefaultKeyBuilder             | 100.00%  | 0         |
| ✅      | titpetric/etl/server/middleware/ratelimit         | NewMemoryStore                   | 100.00%  | 0         |
| ✅      | titpetric/etl/server/middleware/ratelimit         | NewMiddleware                    | 100.00%  | 0         |
| ✅      | titpetric/etl/server/middleware/ratelimit         | max                              | 100.00%  | 1         |
| ❌      | titpetric/etl/server/middleware/ratelimit         | responseWrapper.Flush            | 0.00%    | 1         |
| ❌      | titpetric/etl/server/middleware/ratelimit         | responseWrapper.Hijack           | 0.00%    | 1         |

